Importing data to OpenREM
*************************

Importing dose related data from DICOM files
============================================

If you are using linux, or for Windows if you have put
``C:\Python27\;C:\Python27\Lib\site-packages;C:\Python27\Scripts`` onto
your system path, you should be able to import from the command line:

Radiation Dose Structured Reports
---------------------------------

.. sourcecode:: bash

    openrem_rdsr.py filename.dcm

In linux, or using an advanced shell in Windows, you can use wildcards
to process a number of files at once, ie::

    openrem_rdsr.py *.dcm

This feature will be added for Windows users with the standard cmd.exe shell in
a future version, and is tracked as `issue #9`_

For mammography DICOM images
----------------------------
.. sourcecode:: bash

    openrem_mg.py filename.dcm

The facility for extracting dose information from mammography DICOM images
has been designed and tested with images created with the GE Senographe DS.
It has now been tested in a limited fashion with the images generated by the
following systems:

    * GE Senographe Essential
    * Hologic Selenia
    * Siemens Inspiration

See :ref:`mammo-module` for testing restrictions.

For CT dose summary files from Philips CT scanners
--------------------------------------------------
.. sourcecode:: bash

    openrem_ctphilips.py filename.dcm


Importing dose related data from csv files using the command line
=================================================================

Patient height and weight information
-------------------------------------

If height and weight data is not available in the DICOM data, but is available
from another source, then it can be imported into the database using the 
``openrem_ptsizecsv.py`` function. Normally the key to match the size information
with the studies in the database will be the accession number; however in some
situations this isn't available and the Study Instance UID can be used instead.

usage::

    openrem_ptsizecsv.py [-h] [-u] [-v] csvfile id height weight

``-h, --help``
  Print the help text.

``-u, --si-uid``
  Use Study Instance UID instead of Accession Number.

``-v, --verbose``
  *New in 0.3.7* Print to the standard output the success or otherwise of inserting each value.

``csvfile``
  csv file containing the height and/or weight information and study identifier. 
  Other columns will be ignored. Use quotes if the filepath has spaces.

``id``
  Column title for the accession number or study instance UID. Use quotes
  if the title has spaces.

``height``
  Column title for the patient height (DICOM size) - if this information 
  is missing simply add a blank column with a suitable title. Use quotes
  if the title has spaces.

``weight``
  Column title for the patient weight - if this information is missing 
  simply add a blank column with a suitable title. Use quotes if the title
  has spaces.

..  versionchanged:: 0.3.7
    Verbosity flag added to supress printing to the standard output
    unless requested.


..  _`issue #9`: https://bitbucket.org/openrem/openrem/issue/9/
